@model DataLayer.Producto

@{
    ViewBag.Title = "DetalleDeProducto";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Scripts{
    @Scripts.Render("~/Scripts/Project/JS/DetalleProducto.js")
    @Scripts.Render("~/Scripts/jquery.validate.min.js")

}

<h1>@Model.nombre - @Html.DisplayNameFor(m => m.sku)#@Html.DisplayFor(m => m.sku)</h1>
<h3 class="text-muted">Detalle del Producto </h3>

<div>
    <hr />

    <button class="btn btn-success btn-block btnAddToCart" id="TopBtn">
        <i class="material-icons">add_shopping_cart</i>
        Agregar al Carrito
    </button>
    <div class="row">
        <div class="col-md-6">
            <dl class="dl-horizontal">
                <dt>
                    @Html.DisplayNameFor(model => model.nombre)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.nombre)
                </dd>

                <dt>
                    @Html.DisplayNameFor(model => model.stock)
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.stock)
                </dd>

                <dt>
                    @Html.DisplayNameFor(model => model.precio_venta)
                </dt>

                <dd>
                    $@Html.DisplayFor(model => model.precio_venta)
                </dd>

                <dt>
                    @Html.DisplayNameFor(model => model.precio_compra)
                </dt>

                <dd>
                    $@Html.DisplayFor(model => model.precio_compra)
                </dd>
            </dl>
            <div class="form-group">
                <label for="cantidad">Cantidad:</label>
                <input class="form-control" type="number" value="1" min="1" max="@Model.stock" id="cantidadInput" name="cantidad" />
            </div>
        </div>
        <div class="col-md-6">
            @{
                string imgSrc;
                if (Model.imagen != null)
                {
                    var base64 = Convert.ToBase64String(Model.imagen);
                    imgSrc = String.Format("data:image/gif;base64,{0}", base64);
                }
                else
                {
                    imgSrc = Url.Content("~/Content/images/nopic_homebox.png");
                }

            }
            <img class="img-responsive img-thumbnail img-rounded" src="@imgSrc" />
        </div>
    </div>


    <hr />

    <div class="row">
        <button class="btn btn-success btn-block btnAddToCart" id="BottomBtn">
            <i class="material-icons">add_shopping_cart</i>
            Agregar al Carrito
        </button>
    </div>
    <hr />
    <div class="row">
        <button class="btn btn-danger btn-block" id="DelBtn">
            <i class="material-icons">delete</i>
            Eliminar Producto
        </button>
    </div>
</div>

<p>
    @Html.Hidden("AddToCart", Url.Action("AddProductToCart", "Producto", new { productSKU = Model.sku, amount = "{0}" }))
    @Html.Hidden("DelProduct", Url.Action("Delete", "Producto", new { productSKU = Model.sku }))
</p>
